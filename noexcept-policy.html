<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>New Page 1</title>
</head>

<body>

<h1>Policy for standard library use of noexcept</h1>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>Peter Dimov:</p>
<blockquote>
  <p>In my opinion, the current wide/narrow practice is wrong. </p>
  <p>It's wrong on a conceptual level, because (almost) no function is actually 
  wide. All functions have implicit requirements that their arguments, *this, 
  and everything else reachable from them be a valid object. (Or, in the case of 
  a constructor, that 'this' points to storage suitable to hold an object.) </p>
  <p>It's also wrong because it sets up a conflict. When specifying, say, 
  operator*, we now need to make a choice between adding a Requires clause and a 
  noexcept, the two being mutually exclusive under the wide/narrow theory. This 
  does not improve the quality of the specification. </p>
  <p>I understand the motivation for all that. The idea is that the requirements 
  are asserted, and the fact that the requirements are asserted is tested by 
  making the assertions throw. But somehow I don't find this sufficient cause to 
  degrade the specification of the standard library for everyone.</p>
</blockquote>
<p>Dave Abrahams:</p>
<blockquote>
<p><span class="il">[As regards not marking narrow functions noexcept] You</span>
<span class="il">should</span> <span class="il">ignore</span> <span class="il">
this</span> <span class="il">bad</span> <span class="il">advice</span>. Normally 
I'd say, &quot;IMO&quot; just to be polite, but I don't feel I <span class="il">should</span> 
do anything to soften <span class="il">this</span> statement. Preconditions and 
exceptions have no intrinsic relationship, and nothing <span class="il">should</span> 
be done to artificially connect them.</p>
</blockquote>
<p>Alisdair Meredith replying to Dave:</p>
<blockquote>
<p>In the wonderful world of well-formed programs, Dave is correct. In the 
practical world of supporting potentially buggy software, we often want to offer 
library modes that help users find their problems quickly.</p>
</blockquote>
<p>Dave replying to Alisdair:</p>
<blockquote>
<p>Such library modes are allowed as extensions and shouldn't be written into 
the library spec.</p>
</blockquote>
<p>Beman Dawes:</p>
<blockquote>
<p>In addition to the problems described by Peter and Dave, failing to mark a 
function nothrow is expensive.<br>
&nbsp;</p>
</blockquote>
<h2>The Problem</h2>
<p>Clause 17 does not state overall policy for the use of noexcept in the 
standard library, except to allow implementers to add noexcept to non-virtual 
functions.</p>
<p>That creates several problems:</p>
<ul>
  <li>Library use of 17 is not subject to serious scrutiny</li>
</ul>
<p>As long as the LWG's policy on use of noexcept is not described in 17, 
library use of 17 is not subject to serious scrutiny by those not privy to the 
inner workings of the LWG. That includes both committee members and others who 
do not normally attend LWG discussions.</p>
<ul>
  <li>There is currently no way to know if noexcept applies to functions like 
  iterator member functions that are required by the standard, but do not appear 
  in any synopsis.<br>
&nbsp;</li>
  <li>Authors of library proposal will have guidance as to when to apply 
  noxecept. </li>
</ul>
<p>By attempting to set a policy, serious debate can occur as to what the policy 
should be. This is important since several committee members believe the Nxxxx 
guidelines are not suitable for long term use.</p>
<p>&nbsp;</p>
<h2>Proposed Wording</h2>
<p>&nbsp;</p>

</body>

</html>